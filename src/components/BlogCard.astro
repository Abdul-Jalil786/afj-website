---
interface Props {
  title: string;
  slug: string;
  date: string;
  excerpt: string;
  image?: string;
  imageAlt?: string;
  tags?: string[];
}

const { title, slug, date, excerpt, image, imageAlt, tags = [] } = Astro.props;

const formattedDate = new Date(date).toLocaleDateString('en-GB', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<article class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow group">
  <!-- Featured Image -->
  <a href={`/blog/${slug}`} class="block aspect-video bg-afj-light-white overflow-hidden">
    {image ? (
      <img
        src={image}
        alt={imageAlt || title}
        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
        loading="lazy"
      />
    ) : (
      <div class="w-full h-full flex items-center justify-center text-afj-secondary/40">
        <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
      </div>
    )}
  </a>

  <!-- Content -->
  <div class="p-5">
    <!-- Tags -->
    {tags.length > 0 && (
      <div class="flex flex-wrap gap-1.5 mb-2">
        {tags.slice(0, 3).map((tag) => (
          <span class="text-xs bg-afj-accent/10 text-afj-accent px-2 py-0.5 rounded-full font-medium">
            {tag}
          </span>
        ))}
      </div>
    )}

    <!-- Title -->
    <h3 class="font-bold text-lg mb-2">
      <a href={`/blog/${slug}`} class="text-afj-text hover:text-afj-accent transition-colors">
        {title}
      </a>
    </h3>

    <!-- Date -->
    <time datetime={date} class="text-xs text-afj-secondary block mb-2">{formattedDate}</time>

    <!-- Excerpt -->
    <p class="text-afj-secondary text-sm leading-relaxed mb-3 line-clamp-3">{excerpt}</p>

    <!-- Read More -->
    <a
      href={`/blog/${slug}`}
      class="inline-flex items-center gap-1 text-afj-accent font-semibold text-sm hover:text-afj-green transition-colors"
    >
      Read more
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
      </svg>
    </a>
  </div>
</article>
